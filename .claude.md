# Claude Instructions for BetterAI Engine

## Database Migrations

**NEVER manually apply database migrations.**

- Do NOT create scripts to apply SQL migrations directly
- Do NOT use `sql.unsafe()` or similar methods to run migration files
- Always use drizzle-kit commands: `db:generate`, `db:migrate`, or `db:push`
- If drizzle-kit fails, inform the user and let them handle it manually
- The user will manage migration issues themselves

## Project Guidelines

- Follow the design document at [docs/design_betteraiengine.md](docs/design_betteraiengine.md)
- Use the existing service architecture (polymarket, ingestion, prediction)
- Maintain structured logging with pino
- Keep raw JSONB data alongside structured tables
- All environment variables are stored in `.env.local` (not `.env`)
- Use the centralized `env` config from `src/config/env.ts` instead of `process.env`
